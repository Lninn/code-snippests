<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clock</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background-color: #dddddd;
      display: grid;
      place-items: center;
    }

    canvas {
      margin: 10px;
      padding: 10px;
      background-color: #ffffff;
      border: 1px solid #aaaaaa;
    }
  </style>
</head>
<body>
  <canvas id="id-canvas" width="300" height="300">
    你的浏览器不支持 Canvas 元素
  </canvas>

  <script>
    const canvas = document.getElementById('id-canvas')
    const ctx = canvas.getContext('2d')

    const canvasPadding = 20
    const hourPadding = 50
    const minutePadding = 40
    const secondPadding = 30

    const canvasWidth = canvas.width
    const canvasHeight = canvas.height

    const clock = {
      x: canvasWidth / 2,
      y: canvasHeight / 2,
      radius: canvasWidth / 2 - canvasPadding
    }

    function drawCircle() {
      ctx.beginPath()
      ctx.strokeStyle = '#ddd'
      
      ctx.arc(clock.x, clock.y, clock.radius, 0, Math.PI * 2)

      ctx.stroke()
      ctx.closePath()
    }

    function drawCenterCircle() {
      ctx.beginPath()
      ctx.strokeStyle = '#000'
      ctx.fillStyle = '#000'
      
      ctx.arc(clock.x, clock.y, 3, 0, Math.PI * 2)

      ctx.stroke()
      ctx.fill()
      ctx.closePath()
    }

    function toFuDu(angle) {
      return angle * (Math.PI / 180)
    }

    function drawCircleText() {
      const nums = []
      const end = 12
      for (let start = 1; start <= end; start++) {
        nums.push(start)
      }

      const NUMER_SPAING = 20
      const MARGIN = 25
      const RADIUS = canvasWidth / 2 - MARGIN
      const HAND_RADIUS = RADIUS + NUMER_SPAING
      const FONT_HEIGHT = 15

      const x0 = canvasWidth / 2
      const y0 = canvasHeight / 2
      
      let a = -60
      for (const num of nums) {
        const hudu = (Math.PI / 180) * a

        const numWidth = ctx.measureText(num).width
        const x = x0 + Math.cos(hudu) * HAND_RADIUS - numWidth / 2
        const y = y0 + Math.sin(hudu) * HAND_RADIUS + 5
        ctx.fillText(
          num,
          x,
          y
        )

        a += 30
      }
    }

    function hands() {
      const d = new Date()
      const h = d.getHours()
      const m = d.getMinutes()
      const s = d.getSeconds()

      drawHand(calc(h, 30), hourPadding)
      drawHand(calc(m, 6), minutePadding)
      drawHand(calc(s, 6), secondPadding)
    }

    function calc(num, step) {
      let v = -90

      while (num > 0) {
        v += step
        num = num - 1
      }

      return v
    }

    // hours minutes seconds
    function drawHand(angle, padding) {
      const hudu = (Math.PI / 180) * angle
      const { x, y } = clock

      const x1 = x + Math.cos(hudu) * (clock.radius - padding)
      const y1 = y + Math.sin(hudu) * (clock.radius - padding)

      ctx.moveTo(x, y)
      ctx.lineTo(x1, y1)
      ctx.stroke()
    }

    function __main() {
      drawCircle()
      drawCenterCircle()
      drawCircleText()
      hands()

      setInterval(function() {
        ctx.clearRect(0, 0, canvasWidth, canvasHeight)
        drawCircle()
        drawCenterCircle()
        drawCircleText()
        hands()
      }, 1000)
    }

    __main()
  </script>
</body>
</html>